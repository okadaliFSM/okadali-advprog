
<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="../images/icon192.png">
    <title>CW02</title>

  <style>
    body { max-width: 500px; }
    #inp { white-space: pre-wrap; }
    #sample { overflow-x: auto; }
    #out { color: blue; }
  </style>
</head>

<body>

<h2 id=title></h2>
<b>Text input &emsp;
<input type=button id=convert value=Convert onclick="toList()">
</b>
<p>
  <textarea id=inp rows=10 cols=50 ></textarea>
</p>
<b>JSON output</b>
<pre id=out></pre>
<hr />
<b>Sample code</b>
<pre id=sample></pre>
<hr />
<p>Ref: 
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters#Examples" 
   target="NewTab">Rest Parameters</a>
</p>

<script>
"use strict";
function toList(str) {
  function toObject(x) {
    let b = {}
    for (let [i,s] of x.split('\t').entries())
      b[keys[i]] = (isNaN(s)? s : Number(s))
    return b
  }
    if (str) inp.value = str
    else str = inp.value
    let [d0, ...data] = str.split('\n')
    let keys = d0.split('\t')
    let a = data.map(toObject)
    out.innerText = JSON.stringify(a, '' ,2)
    console.log(a);
    useFilter(a);
    useMap(a);
    return a
}

    function useFilter(a) {
            console.log("UseFilter Called");
            let newArr = a.filter((item) => {
                return item.id > 3;
            })
            console.log(newArr);
        }

    function useMap(a) {
        console.log("useMap Called");
        let newArr = a.map((item) => {
           return  {
                "id": item.id,
                "name": item.name.toLowerCase(),
                "value": item.value
            }
        })
        console.log(newArr);
    }
const PLANET = 
`Name	Diam	Mass	Radius	Period
Mercury	0.382	0.06	0.40	0.24
Venus	0.949	0.82	0.72	0.62
Earth	1.000	1.00	1.00	1.00
Mars	0.532	0.11	1.52	1.88
Jupiter	11.209	317.80	5.20	11.86
Saturn	9.449	95.20	9.54	29.46
Uranus	4.007	14.60	19.22	84.01
Neptune	3.883	17.20	30.06	164.80`,

MOUNT = `id	name	value
1	A	700
2 	B	600
3	C	500
4	D	400
5  	E	300
6	F	200
7	G	100`

    title.innerText = document.title
    sample.innerText = toList
    inp.value = MOUNT
    //toList()  //array of objects
</script>
<script src="/2022/navbar.js"></script>
</body>
</html>
